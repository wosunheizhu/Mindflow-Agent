ğŸ“Œ å‰æœŸå‡†å¤‡

è·å– API å¯†é’¥ï¼šç¡®ä¿ä½ æ‹¥æœ‰å…·å¤‡ Responsesâ€¯API è®¿é—®æƒé™çš„ OpenAI API å¯†é’¥ã€‚å»ºè®®å°†å¯†é’¥ä¿å­˜åœ¨æœ¬åœ° .env æ–‡ä»¶ï¼ˆå¦‚ï¼šOPENAI_API_KEY=sk-xxxï¼‰ï¼Œä»¥ä¾¿ä»£ç è¯»å–ã€‚

sk-proj-xxxxx

å®‰è£…ä¾èµ–ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ npm init -yï¼ˆæˆ–ä½¿ç”¨ pnpmï¼‰ï¼Œå¹¶å®‰è£…å¿…è¦çš„åŒ…ï¼š

npm install openai axios react react-dom next shadcn-ui tailwindcss @tailwindcss/typography


é…ç½® Tailwindï¼šæ‰§è¡Œ npx tailwindcss init åˆ›å»º tailwind.config.jsï¼Œå¹¶åœ¨ src/globals.css ä¸­å¼•å…¥åŸºç¡€æ ·å¼ã€‚

ğŸ§  åˆ›å»ºæ™ºèƒ½ä½“é…ç½®ä¸æç¤º

ç¼–å†™ç³»ç»Ÿæç¤ºï¼šå°†æˆ‘ä»¬æä¾›çš„ openai_responses_agent_prompt.md å†…å®¹ä¿å­˜åˆ°é¡¹ç›®çš„ src/agent/prompt.mdã€‚è¯¥æç¤ºè¯¦è¿°äº†æ™ºèƒ½ä½“å®šä½ã€å·¥å…·ä½¿ç”¨è§„åˆ™å’Œç•Œé¢è®¾è®¡å»ºè®®ï¼Œç¡®ä¿æ¨¡å‹è°ƒç”¨å·¥å…·æ—¶éµå¾ªè§„èŒƒå¹¶é™„å¸¦æ¥æº
openai.com
openai.com
ã€‚

åˆ›å»ºé…ç½®æ–‡ä»¶ src/agent/config.tsï¼š

å®šä¹‰ä½¿ç”¨çš„æ¨¡å‹ï¼ˆå¦‚ gpt-4o æˆ– gpt-4o-miniï¼‰ï¼›

åœ¨ tools æ•°ç»„ä¸­åˆ—å‡ºéœ€è¦å¯ç”¨çš„å†…ç½®å·¥å…·ï¼Œå¦‚ web_search_previewã€file_searchã€code_interpreter, image_generation, computer_use_preview ç­‰ï¼Œç¡®ä¿è¿™äº›å·¥å…·ä¸ Prompt ä¸­æè¿°çš„åŠŸèƒ½ä¸€è‡´
openai.com
ï¼›

åŠ è½½ .env ä¸­çš„ API å¯†é’¥ã€‚

ç¤ºä¾‹ï¼š

import { OpenAI } from "openai";

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY! });

export async function callAgent(messages: any[]) {
  const response = await openai.responses.create({
    model: "gpt-4o",
    tools: [
      { type: "web_search_preview" },
      { type: "file_search", vector_store_ids: ["your-vector-store-id"] },
      { type: "code_interpreter" },
      { type: "image_generation" },
      { type: "computer_use_preview", display_width: 1024, display_height: 768, environment: "browser" }
    ],
    input: messages[messages.length - 1].content,
  });
  return response;
}

ğŸ’» æ„å»ºç®€çº¦ä¸“ä¸šé£ç•Œé¢

é¡µé¢ç»“æ„ï¼šåœ¨ src/app/page.tsxï¼ˆNext.jsï¼‰æˆ– App.tsxï¼ˆReactï¼‰ä¸­å®ç°ä¸‰æ å¸ƒå±€ï¼š

å·¦ä¾§æ ï¼šå±•ç¤ºä¸Šä¼ æ–‡ä»¶ã€å†å²ä¼šè¯æˆ–å·¥å…·æŒ‰é’®ï¼›

ä¸­é—´ï¼šæ˜¾ç¤ºå¯¹è¯å†…å®¹å’Œæ¨¡å‹è¿”å›çš„ç»“æœï¼ˆæ–‡æœ¬ã€è¡¨æ ¼ã€å›¾åƒæˆ–ä»£ç è¾“å‡ºï¼‰ï¼›

å³ä¾§ï¼šè¾“å…¥åŒºåŸŸï¼Œç”¨æˆ·å¯ä»¥é”®å…¥é—®é¢˜ã€‚

ç•Œé¢å®ç°å»ºè®®ï¼š

ä½¿ç”¨ shadcn/ui ç»„ä»¶åº“ä¸­çš„ Cardã€Buttonã€Textarea ç»„ä»¶ï¼Œé…åˆ Tailwind å¸ƒå±€ï¼›

è®¾ç½®ç»Ÿä¸€çš„æµ…è‰²èƒŒæ™¯ä¸æ·±è‰²æ–‡å­—ï¼Œç¡®ä¿å±‚æ¬¡æ¸…æ™°ï¼Œé‡‡ç”¨åœ†è§’å’Œå¾®å¦™é˜´å½±æå‡è´¨æ„Ÿï¼›

åŠ å…¥åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤ºåé¦ˆï¼Œæ–¹ä¾¿ç”¨æˆ·çŸ¥æ™“å½“å‰æ“ä½œè¿›åº¦ï¼›

ä¸ºç§»åŠ¨ç«¯æ·»åŠ å“åº”å¼å¤„ç†ï¼Œä¾‹å¦‚éšè—ä¾§æ æˆ–æŠ˜å æ¶ˆæ¯ã€‚

ğŸ”§ é›†æˆæ™ºèƒ½ä½“åŠŸèƒ½

å¤„ç†ç”¨æˆ·è¾“å…¥ï¼šåœ¨å‰ç«¯æ•è·ç”¨æˆ·è¾“å…¥åï¼Œå°†å†å²å¯¹è¯ï¼ˆåŒ…æ‹¬ç³»ç»Ÿæç¤ºï¼‰å’Œå½“å‰ç”¨æˆ·æ¶ˆæ¯ä¼ ç»™ callAgent å‡½æ•°ã€‚

è§£ææ¨¡å‹è¾“å‡ºï¼šæ ¹æ® Responsesâ€¯API è¿”å›çš„ç»“æœç±»å‹ï¼Œåˆ†åˆ«æ¸²æŸ“æ–‡æœ¬ã€ä»£ç æ‰§è¡Œç»“æœæˆ–å›¾ç‰‡ã€‚è‹¥è¿”å›åŒ…å«ç½‘é¡µæœç´¢æˆ–æ–‡ä»¶æ£€ç´¢å·¥å…·çš„å¼•ç”¨ï¼Œåˆ™åœ¨æ¶ˆæ¯ä¸­æ’å…¥å¯ç‚¹å‡»çš„æ¥æºé“¾æ¥
openai.com
ã€‚

å®æ—¶æ›´æ–°ï¼šä¸ºæå‡ç”¨æˆ·ä½“éªŒï¼Œå¯ä½¿ç”¨æµå¼è¾“å‡ºï¼ˆStreaming Eventsï¼‰å®æ—¶æ˜¾ç¤ºæ¨¡å‹ç”Ÿæˆè¿‡ç¨‹ï¼Œä»¥ä¾¿åŠæ—¶åé¦ˆé•¿æ–‡æœ¬æˆ–ä»£ç è¿è¡Œæ—¶é—´è¾ƒé•¿çš„æƒ…å†µã€‚

âœ… æµ‹è¯•ä¸è¿­ä»£

è¿è¡Œé¡¹ç›®ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ npm run devï¼ˆæˆ– next devï¼‰ï¼Œåœ¨æµè§ˆå™¨è®¿é—® http://localhost:3000ï¼Œæµ‹è¯•æ™ºèƒ½ä½“èƒ½å¦è°ƒç”¨å„å·¥å…·å¹¶è¿”å›æ­£ç¡®ç»“æœã€‚

ä¸Šä¼ æµ‹è¯•æ–‡ä»¶ï¼šè‹¥éœ€æ–‡ä»¶æ£€ç´¢åŠŸèƒ½ï¼Œå¯åœ¨ UI ä¸­åŠ å…¥ä¸Šä¼ æŒ‰é’®ï¼Œæˆ–æ‰‹åŠ¨å°†æ–‡ä»¶åŠ å…¥å‘é‡å­˜å‚¨ï¼ˆé€šè¿‡åå°è„šæœ¬æˆ– APIï¼‰ï¼Œå¹¶åœ¨ config.ts ä¸­æŒ‡å®š vector_store_idsã€‚

æ£€æŸ¥å®‰å…¨æç¤ºï¼šç¡®ä¿æ•æ„Ÿæ“ä½œï¼ˆä¾‹å¦‚ç”µè„‘ä½¿ç”¨æ—¶è®¿é—®ç¬¬ä¸‰æ–¹é¡µé¢æˆ–æäº¤è¡¨å•ï¼‰éƒ½ä¼šå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œé¿å…è¯¯æ“ä½œ
openai.com
ã€‚