📌 前期准备

获取 API 密钥：确保你拥有具备 Responses API 访问权限的 OpenAI API 密钥。建议将密钥保存在本地 .env 文件（如：OPENAI_API_KEY=sk-xxx），以便代码读取。

sk-proj-xxxxx

安装依赖：在项目根目录运行 npm init -y（或使用 pnpm），并安装必要的包：

npm install openai axios react react-dom next shadcn-ui tailwindcss @tailwindcss/typography


配置 Tailwind：执行 npx tailwindcss init 创建 tailwind.config.js，并在 src/globals.css 中引入基础样式。

🧠 创建智能体配置与提示

编写系统提示：将我们提供的 openai_responses_agent_prompt.md 内容保存到项目的 src/agent/prompt.md。该提示详述了智能体定位、工具使用规则和界面设计建议，确保模型调用工具时遵循规范并附带来源
openai.com
openai.com
。

创建配置文件 src/agent/config.ts：

定义使用的模型（如 gpt-4o 或 gpt-4o-mini）；

在 tools 数组中列出需要启用的内置工具，如 web_search_preview、file_search、code_interpreter, image_generation, computer_use_preview 等，确保这些工具与 Prompt 中描述的功能一致
openai.com
；

加载 .env 中的 API 密钥。

示例：

import { OpenAI } from "openai";

const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY! });

export async function callAgent(messages: any[]) {
  const response = await openai.responses.create({
    model: "gpt-4o",
    tools: [
      { type: "web_search_preview" },
      { type: "file_search", vector_store_ids: ["your-vector-store-id"] },
      { type: "code_interpreter" },
      { type: "image_generation" },
      { type: "computer_use_preview", display_width: 1024, display_height: 768, environment: "browser" }
    ],
    input: messages[messages.length - 1].content,
  });
  return response;
}

💻 构建简约专业风界面

页面结构：在 src/app/page.tsx（Next.js）或 App.tsx（React）中实现三栏布局：

左侧栏：展示上传文件、历史会话或工具按钮；

中间：显示对话内容和模型返回的结果（文本、表格、图像或代码输出）；

右侧：输入区域，用户可以键入问题。

界面实现建议：

使用 shadcn/ui 组件库中的 Card、Button、Textarea 组件，配合 Tailwind 布局；

设置统一的浅色背景与深色文字，确保层次清晰，采用圆角和微妙阴影提升质感；

加入加载状态和错误提示反馈，方便用户知晓当前操作进度；

为移动端添加响应式处理，例如隐藏侧栏或折叠消息。

🔧 集成智能体功能

处理用户输入：在前端捕获用户输入后，将历史对话（包括系统提示）和当前用户消息传给 callAgent 函数。

解析模型输出：根据 Responses API 返回的结果类型，分别渲染文本、代码执行结果或图片。若返回包含网页搜索或文件检索工具的引用，则在消息中插入可点击的来源链接
openai.com
。

实时更新：为提升用户体验，可使用流式输出（Streaming Events）实时显示模型生成过程，以便及时反馈长文本或代码运行时间较长的情况。

✅ 测试与迭代

运行项目：在项目根目录执行 npm run dev（或 next dev），在浏览器访问 http://localhost:3000，测试智能体能否调用各工具并返回正确结果。

上传测试文件：若需文件检索功能，可在 UI 中加入上传按钮，或手动将文件加入向量存储（通过后台脚本或 API），并在 config.ts 中指定 vector_store_ids。

检查安全提示：确保敏感操作（例如电脑使用时访问第三方页面或提交表单）都会弹出确认对话框，避免误操作
openai.com
。