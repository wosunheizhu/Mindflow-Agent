# 🎯 API 集成操作指南

## ✅ 已完成的准备工作

- ✅ 安装了依赖包 (googleapis, axios)
- ✅ 创建了更新后的工具文件 (tools-updated.ts)
- ✅ 创建了自动更新脚本 (update-tools.sh)

---

## 📝 你需要完成的步骤

### 步骤 1: 获取 API 密钥（10分钟）

#### A. Google Custom Search API（免费）

**1. 获取 Google API 密钥**
- 🔗 访问：https://console.cloud.google.com/
- 创建项目 → 启用 "Custom Search API" → 创建 API 密钥
- 复制密钥（以 AIza 开头）

**2. 创建搜索引擎 ID**
- 🔗 访问：https://programmablesearchengine.google.com/
- 添加搜索引擎 → 要搜索的网站输入 `*` → 复制搜索引擎 ID

#### B. Judge0 API（免费）

**1. 获取 Judge0 密钥**
- 🔗 访问：https://rapidapi.com/
- 注册登录 → 搜索 "Judge0 CE" → 订阅免费计划
- 复制 X-RapidAPI-Key

---

### 步骤 2: 配置环境变量（2分钟）

**打开编辑器，编辑 `.env.local` 文件**

在文件末尾添加以下内容（替换为你的实际密钥）：

```env
# Google Custom Search API
GOOGLE_API_KEY=你的_Google_API_密钥
GOOGLE_CSE_ID=你的_搜索引擎_ID

# Judge0 Code Execution API
JUDGE0_API_KEY=你的_RapidAPI_密钥
```

**示例**（记得替换为你自己的密钥）：
```env
GOOGLE_API_KEY=AIzaSyABCDEFGHIJKLMNOPQRSTUVWXYZ
GOOGLE_CSE_ID=a1b2c3d4e5f6g7h8i
JUDGE0_API_KEY=1234567890abcdefghijklmno
```

💡 **提示**：可以参考 `env-template.txt` 文件

---

### 步骤 3: 更新代码（1分钟）

**在终端执行自动更新脚本**：

```bash
cd /Users/juntinghua/Desktop/agent
./update-tools.sh
```

或者**手动执行**：

```bash
# 备份原文件
cp lib/tools.ts lib/tools-backup.ts

# 替换为新文件
cp lib/tools-updated.ts lib/tools.ts
```

---

### 步骤 4: 重启服务器（1分钟）

**在运行 npm run dev 的终端**：
1. 按 `Ctrl + C` 停止服务器
2. 重新启动：
```bash
npm run dev
```

---

### 步骤 5: 测试功能（2分钟）

访问：http://localhost:3000

#### 测试网页搜索：
```
搜索 OpenAI GPT-4 Turbo 的特点
```

**预期结果**：应该看到真实的 Google 搜索结果，包含标题、摘要和链接

#### 测试代码执行：
```
用 Python 写一个程序：计算 1 到 100 的和，并输出结果
```

**预期结果**：应该看到实际的代码执行输出（5050）

#### 测试组合功能：
```
搜索什么是斐波那契数列，然后用 Python 实现前 10 项
```

**预期结果**：先搜索定义，然后执行代码生成数列

---

## 🎯 完整操作流程

```bash
# 1. 进入项目目录
cd /Users/juntinghua/Desktop/agent

# 2. 编辑环境变量（在编辑器中打开 .env.local）
# 添加 GOOGLE_API_KEY, GOOGLE_CSE_ID, JUDGE0_API_KEY

# 3. 运行更新脚本
./update-tools.sh

# 4. 重启服务器
# 在运行 npm run dev 的终端按 Ctrl+C，然后：
npm run dev

# 5. 测试
# 访问 http://localhost:3000
```

---

## 📚 详细文档

- **快速开始**：查看 `QUICK-START-CN.md`
- **详细步骤**：查看 `INTEGRATION-GUIDE.md`  
- **环境变量模板**：查看 `env-template.txt`
- **API 集成状态**：查看 `API-INTEGRATION-STATUS.md`

---

## ❓ 常见问题

### Q: 如果不配置 API 会怎样？
A: 系统会自动降级到模拟模式，显示提示信息，不影响其他功能。

### Q: API 有使用限制吗？
A: 
- Google Search: 免费 100次/天
- Judge0: 免费 50次/天
- 足够日常使用

### Q: 如何知道 API 是否配置成功？
A: 
- 看到真实的搜索结果（不是模拟数据）
- 代码执行有真实输出
- 工具调用卡片不显示 "⚠️ 未配置" 提示

### Q: 遇到错误怎么办？
A:
1. 检查 `.env.local` 文件格式是否正确
2. 确认 API 密钥没有多余空格
3. 查看终端的错误信息
4. 确认 API 已启用且在配额内

---

## 🎉 完成后你将拥有

- ✅ 真实的网页搜索功能（Google 搜索）
- ✅ 真实的代码执行功能（支持 Python/JavaScript）
- ✅ 完整的 AI 智能助手体验
- ✅ 专业的工具集成系统

---

## 💡 下一步建议

完成基础集成后，你可以：

1. **优化搜索结果展示**
   - 添加更多搜索结果
   - 美化结果展示格式

2. **增强代码执行**
   - 支持更多编程语言
   - 添加代码语法高亮

3. **集成更多 API**
   - 天气查询（OpenWeatherMap）
   - 文件检索（Pinecone）

---

**准备好开始了吗？** 

1. 获取 API 密钥
2. 配置环境变量
3. 运行更新脚本
4. 测试功能

**祝你集成顺利！** 🚀

