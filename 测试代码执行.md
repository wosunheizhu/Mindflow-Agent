# 🧪 代码执行功能测试指南

## ✅ 已配置
- Judge0 API 密钥已设置
- 真实代码执行功能已启用

---

## 🚀 测试步骤

### 1. 重启服务器

在运行 npm run dev 的终端：
```
按 Ctrl + C 停止
然后重新运行：npm run dev
```

### 2. 访问应用
```
http://localhost:3000
```

---

## 📝 测试用例

### 基础测试 - Python 计算
```
用 Python 计算 1 到 100 的和
```

**预期输出**：
```
5050
```

---

### 测试 2 - 变量操作
```
用 Python 写代码：定义两个变量 a=10, b=20，计算它们的和并输出
```

**预期输出**：
```
30
```

---

### 测试 3 - 循环
```
用 Python 输出斐波那契数列的前 10 项
```

**预期输出**：
```
0, 1, 1, 2, 3, 5, 8, 13, 21, 34
```

---

### 测试 4 - 函数
```
用 Python 写一个函数判断一个数是否为质数，然后测试 17 和 20
```

**预期输出**：
```
17 是质数
20 不是质数
```

---

### 测试 5 - 列表操作
```
用 Python 创建一个列表 [3, 1, 4, 1, 5, 9, 2, 6]，对它排序并输出
```

**预期输出**：
```
[1, 1, 2, 3, 4, 5, 6, 9]
```

---

### 测试 6 - JavaScript（如果支持）
```
用 JavaScript 计算 10 的阶乘
```

**预期输出**：
```
3628800
```

---

## ✅ 成功标志

### 真实执行 vs 模拟
- ✅ **真实执行**：看到实际计算结果（如 5050）
- ❌ **模拟模式**：看到 "代码执行模拟结果" 提示

### 工具调用展示
在对话中应该看到蓝色卡片：
```
工具调用 - 代码执行
输入参数：
{
  "code": "...",
  "language": "python"
}

执行结果：
输出: 5050
状态: Accepted
时间: 0.01s
```

---

## 🔍 检查要点

1. **是否有 "⚠️ 未配置" 提示**？
   - 有 → 检查 .env.local 文件
   - 无 → 配置成功

2. **是否看到真实输出**？
   - 是 → 代码执行成功
   - 否 → 检查 API 密钥

3. **执行时间**？
   - 显示时间（如 0.01s）→ 真实执行
   - 无时间 → 可能是模拟模式

---

## ❓ 故障排查

### 问题：仍然显示模拟结果
**解决**：
1. 确认 .env.local 中有 JUDGE0_API_KEY
2. 确认密钥格式正确（无空格）
3. 重启服务器（Ctrl+C 后重新 npm run dev）

### 问题：显示 API 错误
**解决**：
1. 检查 RapidAPI 订阅是否成功
2. 确认免费配额未用尽（50次/天）
3. 检查网络连接

### 问题：执行超时
**解决**：
- 正常情况，复杂代码需要几秒钟
- Judge0 API 服务器可能较慢

---

## 📊 API 使用情况

免费计划限制：
- **50 次/天**
- 每次请求最多 2 秒执行时间
- 支持 60+ 编程语言

查看使用情况：
访问 https://rapidapi.com/judge0-official/api/judge0-ce

---

## 🎯 高级测试

### 复杂算法
```
用 Python 实现快速排序算法，对列表 [64, 34, 25, 12, 22, 11, 90] 排序
```

### 数据分析
```
用 Python 计算列表 [10, 20, 30, 40, 50] 的平均值、最大值和最小值
```

### 字符串处理
```
用 Python 判断字符串 "radar" 是否是回文
```

---

**准备好测试了吗？重启服务器开始！** 🚀

