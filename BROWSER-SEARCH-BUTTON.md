# 🌐 浏览器搜索控制按钮 - 使用指南

## ✅ 功能添加完成

已成功添加**浏览器搜索控制按钮**，可以控制 gpt-oss-20b 模型的浏览器搜索参数。

---

## 🎨 按钮样式

### 位置
输入框上方的功能选项栏，位于"深度思考"按钮旁边

### 外观
- **图标**: 🔍 Search（搜索图标）
- **文字**: "网络搜索"
- **未启用**: 灰色透明背景
- **已启用**: 绿色背景 + 绿色文字 + "ON"标签
- **样式**: 与深度思考按钮完全一致的设计

### 颜色方案
```css
未启用：
- 背景：transparent / hover时灰色
- 文字：默认颜色
- 图标：默认颜色

已启用：
- 背景：浅绿色 bg-green-100 (light) / dark:bg-green-900/30 (dark)
- 文字：绿色 text-green-600 / dark:text-green-400
- 标签："ON" 深绿色背景
```

---

## 🚀 使用方法

### 在聊天界面
1. 打开 `http://localhost:3000/chat`
2. 找到输入框上方的**"网络搜索"**按钮
3. 点击按钮启用/禁用

### 状态显示
按钮右侧会实时显示当前模式：
- `💬 标准模式` - 两个功能都未启用
- `🧠 深度思考模式` - 仅深度思考启用
- `🌐 网络搜索模式` - 仅网络搜索启用  
- `🧠🌐 深度思考+网络搜索` - 两个功能都启用

---

## 📋 按钮布局

```
┌─────────────────────────────────────────────────────────┐
│ [📤 上传] │ [🧠 深度思考] │ [🔍 网络搜索]    💬 标准模式 │
└─────────────────────────────────────────────────────────┘
```

点击后：
```
┌─────────────────────────────────────────────────────────┐
│ [📤 上传] │ [🧠 深度思考 ON] │ [🔍 网络搜索 ON] 🧠🌐   │
└─────────────────────────────────────────────────────────┘
```

---

## ⚙️ 功能说明

### 浏览器搜索参数
- **API参数名**: `browser_search`
- **传递到**: Ollama API 的 `options.browser_search`
- **作用**: 控制模型是否可以使用浏览器搜索功能

### 与工具调用的区别
- **工具调用**: 我们的系统主动调用外部API（如Brave Search）
- **浏览器搜索**: 模型内部的搜索能力（如果模型支持）

---

## 🎯 使用场景

### 启用网络搜索时
```
用户: 今天中国股市如何？
AI: [自动启用浏览器搜索] 根据最新信息...
```

### 不启用网络搜索
```
用户: 今天中国股市如何？
AI: 对不起，我无法获取实时信息...
```

---

## 💡 最佳实践

### 推荐配置

1. **一般问答**: 标准模式（两个都不启用）
2. **复杂分析**: 深度思考模式
3. **需要最新信息**: 网络搜索模式
4. **复杂+实时**: 深度思考 + 网络搜索

### 功能组合

| 深度思考 | 网络搜索 | 适用场景 |
|---------|---------|---------|
| ❌ | ❌ | 基础对话、已知知识问答 |
| ✅ | ❌ | 复杂概念解释、学术分析 |
| ❌ | ✅ | 实时信息查询、新闻热点 |
| ✅ | ✅ | 复杂实时问题、深度调研 |

---

## 🔧 技术实现

### 前端代码
```typescript
// 状态管理
const [browserSearch, setBrowserSearch] = useState(false);

// 按钮组件
<button
  onClick={() => setBrowserSearch(!browserSearch)}
  className={`btn-ghost text-sm ${
    browserSearch 
      ? 'bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400' 
      : ''
  }`}
>
  <Search size={16} className={browserSearch ? 'text-green-600' : ''} />
  网络搜索
  {browserSearch && <span className="...">ON</span>}
</button>

// API调用
body: JSON.stringify({ 
  messages: newMessages,
  browserSearch: browserSearch
})
```

### 后端代码
```typescript
// 接收参数
const { browserSearch = false } = await req.json();

// 传递给Ollama
options: {
  browser_search: browserSearch
}
```

---

## 📊 功能测试

### 测试步骤
1. 访问 `http://localhost:3000/chat`
2. 点击"网络搜索"按钮（变绿色）
3. 输入："今天的科技新闻"
4. 发送消息
5. 观察AI是否使用了网络搜索

### 验证要点
- ✅ 按钮点击后变绿色
- ✅ 显示"ON"标签
- ✅ 状态文字更新为"🌐 网络搜索模式"
- ✅ API调用包含browserSearch参数
- ✅ Ollama收到browser_search选项

---

## 🎊 完成状态

- ✅ 添加browserSearch状态
- ✅ 创建绿色控制按钮
- ✅ 与深度思考按钮风格一致
- ✅ 传递参数到后端API
- ✅ 配置Ollama选项
- ✅ 状态显示更新
- ✅ 无语法错误

---

## 💡 提示

### 刷新浏览器
修改已完成，请硬刷新浏览器查看新按钮：
```
⌘ + Shift + R (Mac)
Ctrl + Shift + R (Windows/Linux)
```

### 按钮位置
在输入框上方，"深度思考"按钮右侧

### 视觉效果
- 深度思考按钮：紫色
- 网络搜索按钮：绿色
- 两个按钮可以同时启用

---

**🎉 浏览器搜索控制按钮已添加！请刷新浏览器查看！**
